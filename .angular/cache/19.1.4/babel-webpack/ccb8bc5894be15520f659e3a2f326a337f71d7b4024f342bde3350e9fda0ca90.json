{"ast":null,"code":"import { MatCardModule } from '@angular/material/card';\nimport { MatFormFieldModule } from '@angular/material/form-field';\nimport { FormsModule } from '@angular/forms';\nimport { CommonModule } from '@angular/common';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/material/snack-bar\";\nimport * as i2 from \"src/app/services/login.service\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"@angular/forms\";\nexport let LoginComponent = /*#__PURE__*/(() => {\n  class LoginComponent {\n    snack;\n    login;\n    router;\n    loginData = {\n      username: '',\n      password: ''\n    };\n    constructor(snack, login, router) {\n      this.snack = snack;\n      this.login = login;\n      this.router = router;\n    }\n    ngOnInit() {}\n    onLogin() {\n      console.log('login btn clicked');\n      if (this.loginData.username.trim() == '' || this.loginData.username == null) {\n        this.snack.open('Username is required !! ', '', {\n          duration: 3000\n        });\n        return;\n      }\n      if (this.loginData.password.trim() == '' || this.loginData.password == null) {\n        this.snack.open('Password is required !! ', '', {\n          duration: 3000\n        });\n        return;\n      }\n      //request to server to generate token\n      this.login.generateToken(this.loginData).subscribe(data => {\n        console.log('success');\n        console.log(data);\n        //login...\n        this.login.loginUser(data.token);\n        this.login.getCurrentUser().subscribe(user => {\n          this.login.setUser(user);\n          console.log(user);\n          //redirect ...ADMIN: admin-dashboard\n          //redirect ...NORMAL:normal-dashboard\n          if (this.login.getUserRole() == 'ADMIN') {\n            //admin dashboard\n            // window.location.href = '/admin';\n            this.router.navigate(['admin']);\n            this.login.loginStatusSubject.next(true);\n          } else if (this.login.getUserRole() == 'NORMAL') {\n            //normal user dashbaord\n            // window.location.href = '/user-dashboard';\n            this.router.navigate(['/']);\n            this.login.loginStatusSubject.next(true);\n          } else {\n            this.login.logout();\n          }\n        });\n      }, error => {\n        console.log('Error !');\n        console.log(error);\n        this.snack.open('Invalid Details !! Try again', '', {\n          duration: 3000\n        });\n      });\n    }\n    onReset() {\n      this.loginData.username = '';\n      this.loginData.password = '';\n    }\n    static ɵfac = function LoginComponent_Factory(__ngFactoryType__) {\n      return new (__ngFactoryType__ || LoginComponent)(i0.ɵɵdirectiveInject(i1.MatSnackBar), i0.ɵɵdirectiveInject(i2.LoginService), i0.ɵɵdirectiveInject(i3.Router));\n    };\n    static ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: LoginComponent,\n      selectors: [[\"app-login\"]],\n      decls: 20,\n      vars: 2,\n      consts: [[\"registrationForm\", \"ngForm\"], [1, \"login-wrapper\"], [1, \"login-card\"], [1, \"text-center\", \"login-header\"], [3, \"ngSubmit\"], [\"for\", \"username\", 1, \"field-label\"], [\"type\", \"text\", \"id\", \"username\", \"name\", \"username\", \"placeholder\", \"Enter your username\", 1, \"input-field\", 3, \"ngModelChange\", \"ngModel\"], [\"for\", \"password\", 1, \"field-label\"], [\"type\", \"password\", \"id\", \"password\", \"name\", \"password\", \"placeholder\", \"Enter your password\", 1, \"input-field\", 3, \"ngModelChange\", \"ngModel\"], [1, \"text-center\", \"mt-4\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\"], [1, \"text-center\", \"mt-3\"], [1, \"register-text\"], [\"href\", \"/signup\", 1, \"btn-link\"]],\n      template: function LoginComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          const _r1 = i0.ɵɵgetCurrentView();\n          i0.ɵɵelementStart(0, \"div\", 1)(1, \"div\", 2)(2, \"h1\", 3);\n          i0.ɵɵtext(3, \"Login\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(4, \"form\", 4, 0);\n          i0.ɵɵlistener(\"ngSubmit\", function LoginComponent_Template_form_ngSubmit_4_listener() {\n            i0.ɵɵrestoreView(_r1);\n            return i0.ɵɵresetView(ctx.onLogin());\n          });\n          i0.ɵɵelementStart(6, \"label\", 5);\n          i0.ɵɵtext(7, \"Username\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(8, \"input\", 6);\n          i0.ɵɵtwoWayListener(\"ngModelChange\", function LoginComponent_Template_input_ngModelChange_8_listener($event) {\n            i0.ɵɵrestoreView(_r1);\n            i0.ɵɵtwoWayBindingSet(ctx.loginData.username, $event) || (ctx.loginData.username = $event);\n            return i0.ɵɵresetView($event);\n          });\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(9, \"label\", 7);\n          i0.ɵɵtext(10, \"Password\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(11, \"input\", 8);\n          i0.ɵɵtwoWayListener(\"ngModelChange\", function LoginComponent_Template_input_ngModelChange_11_listener($event) {\n            i0.ɵɵrestoreView(_r1);\n            i0.ɵɵtwoWayBindingSet(ctx.loginData.password, $event) || (ctx.loginData.password = $event);\n            return i0.ɵɵresetView($event);\n          });\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(12, \"div\", 9)(13, \"button\", 10);\n          i0.ɵɵtext(14, \"Login\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(15, \"div\", 11)(16, \"span\", 12);\n          i0.ɵɵtext(17, \"Don't have an account?\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(18, \"a\", 13);\n          i0.ɵɵtext(19, \"Register\");\n          i0.ɵɵelementEnd()()()()();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(8);\n          i0.ɵɵtwoWayProperty(\"ngModel\", ctx.loginData.username);\n          i0.ɵɵadvance(3);\n          i0.ɵɵtwoWayProperty(\"ngModel\", ctx.loginData.password);\n        }\n      },\n      dependencies: [MatCardModule, MatFormFieldModule, FormsModule, i4.ɵNgNoValidate, i4.DefaultValueAccessor, i4.NgControlStatus, i4.NgControlStatusGroup, i4.NgModel, i4.NgForm, CommonModule],\n      styles: [\"body[_ngcontent-%COMP%]{background-color:#f9f9ef;font-family:Arial,sans-serif;margin:0;padding:0}.login-wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;min-height:100vh}.login-card[_ngcontent-%COMP%]{width:100%;max-width:400px;background-color:#fff;padding:30px;box-shadow:0 6px 12px #00800066;border-radius:12px;text-align:center;margin-top:-100px}.login-header[_ngcontent-%COMP%]{font-size:24px;font-weight:700;margin-bottom:20px}.field-label[_ngcontent-%COMP%]{display:block;text-align:left;font-weight:600;margin:10px 0 5px}.input-field[_ngcontent-%COMP%]{width:100%;padding:12px;font-size:16px;border:1px solid #ddd;border-radius:8px;margin-bottom:15px;outline:none;transition:border-color .3s}.input-field[_ngcontent-%COMP%]:focus{border-color:#007bff}.btn[_ngcontent-%COMP%]{display:inline-block;padding:12px 20px;font-size:16px;color:#fff;background-color:#007bff;border:none;border-radius:8px;cursor:pointer;transition:background-color .3s}.btn[_ngcontent-%COMP%]:hover{background-color:#0056b3}.btn-primary[_ngcontent-%COMP%]{width:100%}.btn-link[_ngcontent-%COMP%]{color:#007bff;text-decoration:none;font-weight:600;margin-left:5px}.btn-link[_ngcontent-%COMP%]:hover{text-decoration:underline}.register-text[_ngcontent-%COMP%]{font-size:14px;color:#666}@media (max-width: 768px){.login-card[_ngcontent-%COMP%]{padding:20px}}\"]\n    });\n  }\n  return LoginComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}